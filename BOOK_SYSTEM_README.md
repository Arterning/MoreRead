# 📚 个人书籍管理系统 - 使用说明

## ✅ 已完成设置

### 数据库
- ✅ 所有数据表已创建（books, categories, authors, tags, notes, note_tag）
- ✅ 已添加 10 个预设分类（Fiction, Technology, Science 等）
- ✅ 存储链接已创建（封面图片可正常访问）

### 功能模块
- ✅ 用户认证系统
- ✅ 书籍上传和管理（PDF, EPUB, MOBI）
- ✅ 在线阅读器（PDF 和 EPUB）
- ✅ 笔记系统（支持标签）
- ✅ Dark 模式

---

## 🚀 启动项目

### 1. 启动后端服务器
```bash
php artisan serve
```
访问：http://localhost:8000

### 2. 启动前端开发服务器（新终端）
```bash
pnpm run dev
```

---

## 📖 使用指南

### 首次使用

1. **注册账户**
   - 访问 http://localhost:8000/register
   - 创建你的账户

2. **登录**
   - 使用刚创建的账户登录

3. **访问书籍管理**
   - 登录后访问：http://localhost:8000/books

### 上传书籍

1. 点击右上角 "Add Book" 按钮
2. 选择电子书文件（PDF、EPUB 或 MOBI）
   - 书名会自动从文件名提取
   - 最大文件大小：100MB
3. 填写书籍信息（大部分为可选）：
   - **标题**（必填，可编辑）
   - 作者（可选，可新建）
   - 分类（可选，可新建）
   - 封面图片（可选，最大 5MB）
   - ISBN、出版社、出版日期
   - 简介
   - 个人评分（1-5星）
4. 点击 "Add Book" 完成上传

### 阅读书籍

1. 在书籍列表中点击任意书籍
2. 在详情页点击 "Read Book" 按钮
3. 使用阅读器功能：
   - **PDF 阅读器**：
     - 方向键翻页
     - +/- 键缩放
     - F 键全屏
   - **EPUB 阅读器**：
     - 方向键翻页
     - +/- 键调整字体大小
     - F 键全屏

### 添加笔记

**方法一：在阅读时**
1. 点击阅读器顶部的 "Add Note" 按钮
2. 页码会自动填充当前位置
3. 输入笔记内容
4. 可添加标签便于分类
5. 点击 "Save Note"

**方法二：在详情页**
1. 在书籍详情页的笔记区域点击 "Add Note"
2. 填写笔记内容和标签
3. 保存

### 管理笔记

- **查看**：在书籍详情页查看所有笔记
- **编辑**：点击笔记旁的 "Edit" 按钮
- **删除**：点击笔记旁的 "Delete" 按钮
- **标签筛选**：使用标签快速找到相关笔记

### 编辑书籍

1. 在书籍详情页点击 "Edit" 按钮
2. 可以更新：
   - 基本信息（标题、作者、分类等）
   - 阅读状态（未读/在读/已读）
   - 阅读进度（0-100%）
   - 封面图片
   - 个人评分

### 搜索和筛选

在书籍列表页面：
- **搜索**：输入书名或作者名
- **分类筛选**：选择特定分类
- **状态筛选**：选择阅读状态
- **重置筛选**：点击 "Clear filters"

---

## 🎨 支持的格式

### 电子书格式
- PDF
- EPUB
- MOBI（上传支持，阅读器开发中）

### 封面图片
- JPG / JPEG
- PNG
- GIF
- WebP

---

## 🌙 Dark 模式

系统会自动检测你的系统主题设置：
- 如果系统是深色模式，应用自动切换到 Dark 主题
- 阅读器也会自动适配深色背景

---

## 📁 文件存储位置

- **电子书文件**：`storage/app/private/books/`（私有，只有拥有者可访问）
- **封面图片**：`storage/app/public/covers/`（公开）

---

## 🔧 常见问题

### Q: 上传的书籍无法打开？
A: 确保文件格式正确（PDF 或 EPUB），文件大小不超过 100MB。

### Q: 封面图片不显示？
A: 确认已运行 `php artisan storage:link` 命令创建存储链接。

### Q: 阅读器无法加载？
A: 检查浏览器控制台是否有错误，确保 Vite 开发服务器正在运行（pnpm run dev）。

### Q: 如何添加新的分类或作者？
A: 在上传书籍页面，作者和分类下拉框下方有 "Add new" 按钮，可以快速创建。

---

## 📊 数据库表结构

### books（书籍表）
- 用户ID、标题、作者、分类
- 文件路径、类型、大小
- 阅读进度、状态、评分
- ISBN、出版社、出版日期等

### notes（笔记表）
- 用户ID、书籍ID
- 笔记内容、页码/位置
- 关联标签

### categories（分类表）
- 名称、描述、颜色

### authors（作者表）
- 姓名、简介

### tags（标签表）
- 标签名（每个用户独立）

---

## 🎯 下一步优化建议

1. **批量导入**：支持一次上传多本书籍
2. **统计面板**：显示阅读统计、趋势图表
3. **导出功能**：导出笔记为 Markdown 或 PDF
4. **分享功能**：生成阅读笔记的分享链接
5. **MOBI 阅读器**：添加对 MOBI 格式的支持
6. **全文搜索**：搜索书籍内容和笔记
7. **云同步**：支持多设备同步

---

## 📞 技术支持

如有问题或建议，请检查：
1. Laravel 日志：`storage/logs/laravel.log`
2. 浏览器控制台错误
3. 确保所有依赖已安装（`composer install` 和 `pnpm install`）

---

**享受你的个人图书馆！** 📚✨
